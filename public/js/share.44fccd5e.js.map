{"version":3,"sources":["webpack:///./src/views/Share.vue?9c42","webpack:///src/views/Share.vue","webpack:///./src/views/Share.vue?ea9d","webpack:///./src/views/Share.vue?1a3f","webpack:///./src/views/Share.vue"],"names":["zlib","name","data","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","staticStyle","_s","address","attrs","first_tx","blockheight","substr","_l","id","key","refID","uuid","toLowerCase","undefined","identity","username","_e","block","signature","payload","subject","id_number","surname","issuer","office","country","p7mhash","on","storeCredentials","staticRenderFns","component"],"mappings":"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","file":"js/share.44fccd5e.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Share.vue?vue&type=style&index=0&lang=css&\"","<template>\n  <div class=\"home\">\n    <div class=\"login-7 tab-box\">\n      <h1>Digital identities of<div style=\"font-size:14px;\">{{ address }}</div></h1>\n      <br><p>These informations are strictly confidentials, please don't share the link with third parties.</p>\n      <div style=\"border:1px solid #ccc; text-align:left; color:#000; border-radius:5px; margin-top:20px; font-size:12px; padding:15px\">\n          <v-gravatar :email=\"address\" style=\"float:left; height:55px; margin-right:10px;\" />\n          <strong>BDCASH ADDRESS</strong><br>\n          Created at block <strong>{{ first_tx.blockheight }}</strong><br>\n          {{ address.substr(0,6) }}...{{ address.substr(-6) }}<br>\n      </div>\n      <div v-for=\"id in linked\" v-bind:key=\"id.refID\">\n          <a :href=\"'https://proof.bdcashprotocol.com/#/uuid/' + id.uuid\" target=\"_blank\">\n            <div style=\"border:1px solid #ccc; text-align: left; color:#000; border-radius:5px; margin-top:20px; font-size:12px; padding:15px\">\n                <img :src = \"'/' + id.refID.toLowerCase() + '.png'\" style=\"float:left; height:75px; margin-right:10px;\" />\n                <strong>{{ id.refID }}</strong>\n                <span v-if=\"id.identity.username !== undefined && id.identity.username !== ''\"><br>{{ id.identity.username }}<br></span>\n                <span v-if=\"id.identity.id !== undefined && id.identity.id !== ''\">ID: {{ id.identity.id }}<br></span>\n                Written at block <strong>{{ id.block }}</strong><br>\n                {{ id.data.signature.substr(0,6) }} ... {{ id.data.signature.substr(-6) }}\n                <div v-if=\"id.refID === 'EID'\">\n                  <div style=\"display:inline-block;\">\n                    <b>SUBJECT</b>: {{ id.identity.payload.subject }}<br>\n                    <b>eID NUMBER</b>: {{ id.identity.payload.id_number }}<br>\n                    <b>NAME</b>: {{ id.identity.payload.name }}<br>\n                    <b>SURNAME</b>: {{ id.identity.payload.surname }}<br>\n                    <b>ISSUED BY</b>: {{ id.identity.payload.issuer }}<br>\n                    <b>OFFICE</b>: {{ id.identity.payload.office }}<br>\n                    <b>COUNTRY</b>: {{ id.identity.payload.country }}<br>\n                    <b>P7M HASH</b>: {{ id.identity.payload.p7mhash }}<br>\n                  </div>\n                </div>\n            </div>\n          </a>\n      </div>\n      <br><br>\n      <a id=\"downloadid\" style=\"display:none\"></a>\n      <b-button size=\"is-large\" v-on:click=\"storeCredentials\" type=\"is-primary\">STORE CREDENTIALS</b-button>\n    </div>\n  </div>\n</template>\n\n<script>\nconst BDCashCore = require('@bdcash-protocol/core')\nconst axios = require('axios')\nvar zlib = require('zlib')\n\nexport default {\n  name: 'Home',\n  data() {\n    return {\n        bdcash: new BDCashCore(true),\n        backendURL: '',\n        address: '',\n        file: '',\n        isWriting: false,\n        showSmsVerification: false,\n        showEmailVerification: false,\n        smsverification: '',\n        emailverification: '',\n        unlockPwd: '',\n        showQRCanvas: false,\n        provider: '',\n        first_tx: {},\n        email: '',\n        providers: [],\n        phone: '',\n        workingmessage: '',\n        success: '',\n        encrypted_wallet: '',\n        public_qrcode: '',\n        sync_qrcode: '',\n        decrypted_wallet: '',\n        linked: '',\n        updated: '',\n        axios: axios,\n        shareURL: '',\n        payload: {\n          identity:{\n            username: '',\n            id: ''\n          }\n        }\n      }\n    },\n    async mounted (){\n      const app = this\n      app.bdcash.staticnodes = true\n      app.checkIdentity()\n    },\n    methods: {\n        async checkIdentity(){\n          const app = this\n          let compressed = app.$route.params.identity\n          while(compressed.indexOf('*') !== -1){\n            compressed = compressed.replace('*','/')\n          }\n          let identity = JSON.parse(zlib.inflateSync(new Buffer(compressed, 'base64')).toString())\n          app.address = identity.address\n          let transactions = await app.bdcash.get('/transactions/' + app.address)\n          let last = transactions.data.length - 1\n          app.first_tx = transactions.data[last]\n          app.bdcash.post('/read', {\n            protocol: 'I://',\n            address: identity.address\n          }).then(async result => {\n            var identities = {}\n            for(let k in result.data){\n              let id = result.data[k]\n              if(identities[id.refID] === undefined){\n                identities[id.refID] = id\n              }\n            }\n            app.linked = []\n            for(let k in identity){\n              let id = identity[k]\n              for(let y in identities){\n                let idB = identities[y]\n                //PUBLIC VERIFICATION\n                let verify = await app.bdcash.verifyMessage(identity.key, idB.data.signature, JSON.stringify(id))\n                if(verify !== false && verify.address === identity.address){\n                  idB.identity = id.identity\n                  app.linked.push(idB)\n                }\n              }\n            }\n          })\n        },\n        storeCredentials(){\n          const app = this\n          app.$buefy.dialog.prompt({\n            message: `Enter a strong password to encrypt the file`,\n            inputAttrs: {\n              type: \"password\"\n            },\n            trapFocus: true,\n            onConfirm: async password => {\n              let encrypted = await app.bdcash.cryptData(app.$route.params.identity, password)\n              var a = document.getElementById(\"downloadid\");\n              var file = new Blob(\n                [encrypted],\n                { type: \"eid\" }\n              );\n              a.href = URL.createObjectURL(file);\n              a.download = app.address + \".eid\";\n              var clickEvent = new MouseEvent(\"click\", {\n                view: window,\n                bubbles: true,\n                cancelable: false\n              });\n              a.dispatchEvent(clickEvent);\n            }\n          })\n        }\n    }\n}\n</script>\n<style>\n  .home{\n    padding: 20px;\n  }\n</style> \n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('div',{staticClass:\"login-7 tab-box\"},[_c('h1',[_vm._v(\"Digital identities of\"),_c('div',{staticStyle:{\"font-size\":\"14px\"}},[_vm._v(_vm._s(_vm.address))])]),_c('br'),_c('p',[_vm._v(\"These informations are strictly confidentials, please don't share the link with third parties.\")]),_c('div',{staticStyle:{\"border\":\"1px solid #ccc\",\"text-align\":\"left\",\"color\":\"#000\",\"border-radius\":\"5px\",\"margin-top\":\"20px\",\"font-size\":\"12px\",\"padding\":\"15px\"}},[_c('v-gravatar',{staticStyle:{\"float\":\"left\",\"height\":\"55px\",\"margin-right\":\"10px\"},attrs:{\"email\":_vm.address}}),_c('strong',[_vm._v(\"BDCASH ADDRESS\")]),_c('br'),_vm._v(\" Created at block \"),_c('strong',[_vm._v(_vm._s(_vm.first_tx.blockheight))]),_c('br'),_vm._v(\" \"+_vm._s(_vm.address.substr(0,6))+\"...\"+_vm._s(_vm.address.substr(-6))),_c('br')],1),_vm._l((_vm.linked),function(id){return _c('div',{key:id.refID},[_c('a',{attrs:{\"href\":'https://proof.bdcashprotocol.com/#/uuid/' + id.uuid,\"target\":\"_blank\"}},[_c('div',{staticStyle:{\"border\":\"1px solid #ccc\",\"text-align\":\"left\",\"color\":\"#000\",\"border-radius\":\"5px\",\"margin-top\":\"20px\",\"font-size\":\"12px\",\"padding\":\"15px\"}},[_c('img',{staticStyle:{\"float\":\"left\",\"height\":\"75px\",\"margin-right\":\"10px\"},attrs:{\"src\":'/' + id.refID.toLowerCase() + '.png'}}),_c('strong',[_vm._v(_vm._s(id.refID))]),(id.identity.username !== undefined && id.identity.username !== '')?_c('span',[_c('br'),_vm._v(_vm._s(id.identity.username)),_c('br')]):_vm._e(),(id.identity.id !== undefined && id.identity.id !== '')?_c('span',[_vm._v(\"ID: \"+_vm._s(id.identity.id)),_c('br')]):_vm._e(),_vm._v(\" Written at block \"),_c('strong',[_vm._v(_vm._s(id.block))]),_c('br'),_vm._v(\" \"+_vm._s(id.data.signature.substr(0,6))+\" ... \"+_vm._s(id.data.signature.substr(-6))+\" \"),(id.refID === 'EID')?_c('div',[_c('div',{staticStyle:{\"display\":\"inline-block\"}},[_c('b',[_vm._v(\"SUBJECT\")]),_vm._v(\": \"+_vm._s(id.identity.payload.subject)),_c('br'),_c('b',[_vm._v(\"eID NUMBER\")]),_vm._v(\": \"+_vm._s(id.identity.payload.id_number)),_c('br'),_c('b',[_vm._v(\"NAME\")]),_vm._v(\": \"+_vm._s(id.identity.payload.name)),_c('br'),_c('b',[_vm._v(\"SURNAME\")]),_vm._v(\": \"+_vm._s(id.identity.payload.surname)),_c('br'),_c('b',[_vm._v(\"ISSUED BY\")]),_vm._v(\": \"+_vm._s(id.identity.payload.issuer)),_c('br'),_c('b',[_vm._v(\"OFFICE\")]),_vm._v(\": \"+_vm._s(id.identity.payload.office)),_c('br'),_c('b',[_vm._v(\"COUNTRY\")]),_vm._v(\": \"+_vm._s(id.identity.payload.country)),_c('br'),_c('b',[_vm._v(\"P7M HASH\")]),_vm._v(\": \"+_vm._s(id.identity.payload.p7mhash)),_c('br')])]):_vm._e()])])])}),_c('br'),_c('br'),_c('a',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"downloadid\"}}),_c('b-button',{attrs:{\"size\":\"is-large\",\"type\":\"is-primary\"},on:{\"click\":_vm.storeCredentials}},[_vm._v(\"STORE CREDENTIALS\")])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Share.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Share.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Share.vue?vue&type=template&id=219bc121&\"\nimport script from \"./Share.vue?vue&type=script&lang=js&\"\nexport * from \"./Share.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Share.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}